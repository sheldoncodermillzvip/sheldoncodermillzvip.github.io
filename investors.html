<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <title>InTown VIP Investor Invitation</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }
        #dialogText {
            color: white;
            background-color: #333333;
        }
        
        #dialogWrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: table;
            background-color: #EEEEEE;
        }
        
        #dialogWrapCell {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }
        
        #mainDialog {
            max-width: 400px;
            margin: 5px;
            border: solid #AAAAAA 1px;
            border-radius: 10px;
            box-shadow: 3px 3px 5px 3px #AAAAAA;
            margin-left: auto;
            margin-right: auto;
            background-color: #FFFFFF;
            overflow: hidden;
            text-align: left;
        }
        #mainDialog > * {
            padding: 10px 30px;
        }
        #passArea {
            padding: 20px 30px;
            background-color: white;
        }
        #passArea > * {
            margin: 5px auto;
        }
        #pass {
            width: 100%;
            height: 40px;
            font-size: 30px;
        }
        
        #messageWrapper {
            float: left;
            vertical-align: middle;
            line-height: 30px;
        }
        
        .notifyText {
            display: none;
        }
        
        #invalidPass {
            color: red;
        }
        
        #success {
            color: green;
        }
        
        #submitPass {
            font-size: 20px;
            border-radius: 5px;
            background-color: #E7E7E7;
            border: solid gray 1px;
            float: right;
            cursor: pointer;
        }
        #contentFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #attribution {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.8em;
        }
        #attribution, #attribution a {
            color: #999;
        }
        .error {
            display: none;
            color: red;
        }
    </style>
  </head>
  <body>
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="dialogWrap">
        <div id="dialogWrapCell">
            <div id="mainDialog">
                <div id="dialogText">VIP Investor Invitation. What is the password?</div>
                <div id="passArea">
                    <p id="passwordPrompt">Password</p>
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Sorry, please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Success!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button">Submit</button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>
                <div id="nocrypto" class="error">
                    <p>
                        Your web browser appears to be outdated. Please visit this page using a modern browser.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="attribution">
        Protected by <a href="https://www.maxlaumeister.com/pagecrypt/">PageCrypt</a>
    </div>
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
